<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no" />
  <title>MBTI × 動物原型人格測驗</title>

  <!-- Google Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <link rel="stylesheet" href="./css/style.css" />

  <!-- 主題色 -->
  <meta name="theme-color" content="#f3efe7" />

  <!-- EmailJS Keys -->
  <meta name="emailjs-public-key" content="9ZPs0xUKexoRA-Ckm" />
  <meta name="emailjs-service-id" content="service_ords2m8" />
  <meta name="emailjs-template-id" content="template_a73agrg" />

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
  <header class="site-header container">
    <h1 class="brand">MBTI × Animal Archetypes</h1>
    <p class="subtitle">探索你的性格，找到專屬動物圖卡</p>
  </header>

  <main class="container">
    <!-- Hero：四象限導視 -->
    <section id="hero" class="hero">
      <div class="hero-grid">
        <div class="hero-card air">
          <img src="./assets/quadrants/Air.jpg" alt="風象 - 分析家" />
          <div class="overlay"><h3>風象<br>分析家</h3></div>
        </div>
        <div class="hero-card fire">
          <img src="./assets/quadrants/Fire.jpg" alt="火象 - 外交家" />
          <div class="overlay"><h3>火象<br>外交家</h3></div>
        </div>
        <div class="hero-card water">
          <img src="./assets/quadrants/Water.jpg" alt="水象 - 守護者" />
          <div class="overlay"><h3>水象<br>守護者</h3></div>
        </div>
        <div class="hero-card earth">
          <img src="./assets/quadrants/Earth.jpg" alt="土象 - 探險家" />
          <div class="overlay"><h3>土象<br>探險家</h3></div>
        </div>
      </div>
      <button id="startBtn" class="btn primary large"><i class="bi bi-play-circle"></i> 開始 32 題情境問卷</button>
    </section>

    <!-- 問卷 -->
    <section id="quiz" class="card hidden" aria-live="polite">
      <div class="quiz-header">
        <div id="progressText" class="progress-text">1 / 32</div>
        <div class="progress">
          <div id="progressBar" class="bar"></div>
        </div>
      </div>

      <div id="questionText" class="question"></div>
      <div id="optionsWrap" class="options"></div>

      <div class="quiz-actions">
        <button id="prevBtn" class="btn ghost" disabled><i class="bi bi-arrow-left"></i> 上一題</button>
        <button id="nextBtn" class="btn primary" disabled>下一題 <i class="bi bi-arrow-right"></i></button>
      </div>
    </section>

    <!-- 結果頁 -->
    <section id="result" class="card hidden">
      <div class="result-head">
        <h2>測驗完成！</h2>
        <p>你的人格原型是...</p>
      </div>

      <div class="result-grid">
        <div class="result-card">
          <h3 class="result-title" id="typeTitle"></h3>
          <p class="result-subtitle" id="typeSubtitle"></p>
          <div class="card-image-wrapper">
             <img id="typeCard" class="type-card" src="" alt="" />
          </div>
          <p id="typeDesc" class="type-desc"></p>
        </div>

        <div class="result-meta">
          <h4><i class="bi bi-clipboard2-data"></i> 八維度分數</h4>
          <ul id="scoreList" class="scores"></ul>

          <div class="cta-row">
            <button id="retakeBtn" class="btn ghost"><i class="bi bi-arrow-clockwise"></i> 再測一次</button>
            <button id="shareBtn" class="btn"><i class="bi bi-share"></i> 分享結果</button>
          </div>

          <details class="email-panel">
            <summary><i class="bi bi-envelope-arrow-down"></i> 把完整報告寄到 Email</summary>
            <form id="emailForm" class="email-form">
              <input type="hidden" name="mbti_type" id="emailMbtiType">
              <input type="hidden" name="type_title" id="emailTypeTitle">
              <input type="hidden" name="type_desc" id="emailTypeDesc">
              <label>名字
                <input type="text" name="user_name" placeholder="你的名字" required />
              </label>
              <label>Email
                <input type="email" name="user_email" placeholder="you@example.com" required />
              </label>
              <button class="btn primary" type="submit">寄送完整報告</button>
            </form>
            <p id="emailMsg" class="hint"></p>
          </details>
        </div>
      </div>
    </section>

    <!-- 載入中／錯誤 -->
    <section id="loader" class="loader hidden">載入題庫中…</section>
    <section id="errorBox" class="error hidden">讀取題庫失敗，請重新整理。</section>
  </main>

  <footer class="container footer">© 2025 MBTI × Animal Archetypes</footer>

  <script src="./js/data.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>

